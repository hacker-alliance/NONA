(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[17],{525:function(e,n,t){"use strict";t.r(n),t.d(n,"newsletterSubscriberMutation",(function(){return ne}));var r=t(0),a=t.n(r),i=t(1),o=t.n(i);var l=t(56);function c(e){var n=e.children,t=e.query,r=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(e,["children","query"]),a=Object(l.b)(t,r);return n&&a?n(a):null}function u(e){var n=Object(l.a)(e.mutation,e),t=n[0],r=n[1];return e.children?e.children(t,r):null}function s(e){var n=Object(l.c)(e.subscription,e);return e.children&&n?e.children(n):null}(c||(c={})).propTypes={client:o.a.object,children:o.a.func.isRequired,fetchPolicy:o.a.string,notifyOnNetworkStatusChange:o.a.bool,onCompleted:o.a.func,onError:o.a.func,pollInterval:o.a.number,query:o.a.object.isRequired,variables:o.a.object,ssr:o.a.bool,partialRefetch:o.a.bool,returnPartialData:o.a.bool},(u||(u={})).propTypes={mutation:o.a.object.isRequired,variables:o.a.object,optimisticResponse:o.a.oneOfType([o.a.object,o.a.func]),refetchQueries:o.a.oneOfType([o.a.arrayOf(o.a.oneOfType([o.a.string,o.a.object])),o.a.func]),awaitRefetchQueries:o.a.bool,update:o.a.func,children:o.a.func.isRequired,onCompleted:o.a.func,onError:o.a.func,fetchPolicy:o.a.string},(s||(s={})).propTypes={subscription:o.a.object.isRequired,variables:o.a.object,children:o.a.func,onSubscriptionData:o.a.func,onSubscriptionComplete:o.a.func,shouldResubscribe:o.a.oneOfType([o.a.func,o.a.bool])};var d=t(16),m=t.n(d),p=t(447),f=t(244),b=t(3),g=t(242),y=t(2),h=t(433),v=t(552),O=t(423),k=t(194),w=t(48);function j(){var e=I(["\n   font-size: ","px;\n  "]);return j=function(){return e},e}function N(){var e=I(["\n   font-size: ","px;\n  "]);return N=function(){return e},e}function C(){var e=I(["\n   width: 70%;\n  "]);return C=function(){return e},e}function S(){var e=I(["\n   width: 55%;\n  "]);return S=function(){return e},e}function x(){var e=I(["\n    margin-top: ",";\n  "]);return x=function(){return e},e}function E(){var e=I(["\n   display: block;\n  "]);return E=function(){return e},e}function T(){var e=I(["\n    margin: 0 "," "," 0;\n  "]);return T=function(){return e},e}function I(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var P=Object(b.default)(f.b).withConfig({displayName:"NewsletterWrapper",componentId:"p18ox4-0"})(["margin-left:0;width:100%;max-width:100%;border:1px solid ",";position:relative;display:block;height:100%;overflow:auto;background-color:#fff;"],(function(e){return e.theme.colors.grey6})),D=b.default.div.withConfig({displayName:"NewsletterStickyWrapper",componentId:"p18ox4-1"})(["position:sticky;top:0;z-index:",";"],(function(e){return e.theme.layers.newsLetterOverBaseContent})),L=Object(b.default)(k.a).withConfig({displayName:"StyledCloseWrap",componentId:"p18ox4-2"})(["top:",";right:0;margin:0 "," "," 0;background:#fff;svg{stroke:",";}",""],Object(y.n)(1),Object(y.n)(2),Object(y.n)(4),(function(e){return e.theme.colors.grey6}),Object(y.m)("medium")(T(),Object(y.n)(1),Object(y.n)(4))),A=Object(b.default)(w.a).withConfig({displayName:"NewsletterHeading",componentId:"p18ox4-3"})(["margin-top:0;margin-right:",";"],Object(y.n)(4.5)),H=Object(b.default)(h.a).withConfig({displayName:"NewsletterSubHeading",componentId:"p18ox4-4"})(["display:none;",";"],Object(y.m)("medium")(E())),_=Object(b.default)(f.a).withConfig({displayName:"NewsletterInfoCol",componentId:"p18ox4-5"})(["margin-bottom:0;margin-top:",";"],Object(y.n)(2)),z=Object(b.default)(f.a).withConfig({displayName:"SignUpFormCol",componentId:"p18ox4-6"})(["margin-bottom:",";",""],Object(y.n)(2),Object(y.m)("medium")(x(),Object(y.n)(2))),V=Object(b.default)(v.a).withConfig({displayName:"FormButton",componentId:"p18ox4-7"})(["width:auto;white-space:nowrap;vertical-align:top;"]),q=b.default.input.withConfig({displayName:"StyledInput",componentId:"p18ox4-8"})(["margin:",";padding:",";height:",";background-color:",";width:60%;border:",";outline-color:",";",";",";"],Object(y.n)("0 1 1 0"),Object(y.n)(1),Object(y.n)(4),(function(e){return e.theme.colors.grey6}),(function(e){return e.error?"2px solid #e85c41":"none"}),(function(e){return e.error?"#e85c41":"default"}),Object(y.m)("medium")(S()),Object(y.m)("large")(C())),R=Object(b.default)(O.a).withConfig({displayName:"NewsletterLegalese",componentId:"p18ox4-9"})(["font-size:","px;margin-bottom:",";",";"],(function(e){return e.theme.typography.size2}),Object(y.n)(1),Object(y.m)("medium")(N(),(function(e){return e.theme.typography.size2})));R.defaultProps={disableInlineLinks:!1};var B=b.default.input.withConfig({displayName:"StyledCheckBox",componentId:"p18ox4-10"})(["border:solid 1px ",";"],(function(e){return e.theme.colors.grey4})),$=Object(b.default)(h.a).withConfig({displayName:"StyledCaption",componentId:"p18ox4-11"})(["display:inline;line-height:",";margin-left:",";font-size:","px;",";"],Object(y.n)(2),Object(y.n)(1),(function(e){return e.theme.typography.size2}),Object(y.m)("medium")(j(),(function(e){return e.theme.typography.size2}))),W=Object(b.default)(g.a).withConfig({displayName:"SuccessMessage",componentId:"p18ox4-12"})(["margin:",";text-align:center;width:100%;"],Object(y.n)(5)),F=t(32),M=function(e){var n=e.heading,t=e.subHeading,r=e.preferenceText,i=e.legalese,o=e.dismissIt,l=e.buttonText,c=e.onClick,u=e.formAction,s=e.error,d=e.inputPlaceholder;return a.a.createElement(a.a.Fragment,null,a.a.createElement(_,{span:{medium:6}},a.a.createElement(A,null,n),a.a.createElement(H,null,t)),a.a.createElement(z,{span:{medium:6}},a.a.createElement("form",{method:"POST",onSubmit:c,action:u},a.a.createElement(q,{type:"email",name:"email",placeholder:d,error:s,required:!0}),a.a.createElement(V,{buttonSize:"smButton",type:"submit"},l),a.a.createElement(R,{dangerouslySetInnerHTML:{__html:i}}),a.a.createElement("label",null,a.a.createElement(B,{type:"checkbox",name:"preferenceCheck",required:!0}),a.a.createElement($,{dangerouslySetInnerHTML:{__html:r}}))),o&&a.a.createElement(L,{role:"presentation",onClick:o},a.a.createElement(F.a,{name:"CLOSE",width:"16",height:"22"}))))};M.propTypes={dismissIt:o.a.func,heading:o.a.string,subHeading:o.a.string,legalese:o.a.string,buttonText:o.a.string,preferenceText:o.a.string,onClick:o.a.func,formAction:o.a.string,error:o.a.bool,inputPlaceholder:o.a.string};var U=M,Q=function(e){var n=e.heading,t=e.subHeading,r=e.stickyHeader,i=e.preferenceText,o=e.legalese,l=e.onDismiss,c=e.buttonText,u=e.onClick,s=e.formAction,d=e.displaySuccess,m=void 0!==d&&d,b=e.error,g=e.successCopy,y=e.inputPlaceholder,h=void 0===y?"Email address":y;return!0===r?a.a.createElement(D,null,a.a.createElement(p.a,{onDismiss:l,render:function(e){var l=e.isDismissed,d=e.dismissIt;return!l&&a.a.createElement(P,{"data-test-id":"NewsletterWrapper"},a.a.createElement(f.b,null,a.a.createElement(f.c,null,m?a.a.createElement(W,null,d&&a.a.createElement(L,{role:"presentation",onClick:d},a.a.createElement(F.a,{name:"CLOSE",width:"16",height:"22"})),g):a.a.createElement(U,{heading:n,subHeading:t,stickyHeader:r,preferenceText:i,legalese:o,dismissIt:d,buttonText:c,onClick:u,formAction:s,error:b,inputPlaceholder:h}))))}})):a.a.createElement(P,{"data-test-id":"NewsletterWrapper"},a.a.createElement(f.b,null,a.a.createElement(f.c,null,m?a.a.createElement(W,null,g):a.a.createElement(U,{heading:n,subHeading:t,stickyHeader:r,preferenceText:i,legalese:o,buttonText:c,onClick:u,formAction:s,error:b,inputPlaceholder:h}))))};Q.propTypes={stickyHeader:o.a.bool,onDismiss:o.a.func,heading:o.a.string,subHeading:o.a.string,legalese:o.a.string,buttonText:o.a.string,preferenceText:o.a.string,onClick:o.a.func,formAction:o.a.string,displaySuccess:o.a.bool,successCopy:o.a.string,error:o.a.bool,inputPlaceholder:o.a.string};var K=Q;function G(){return(G=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function J(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var X=function(e){var n=e.newsletterConfig,t=e.onSubmit,r=e.error,i=J(e,["newsletterConfig","onSubmit","error"]),o=n.copy;return a.a.createElement(K,G({heading:m()(o,"heading",""),subHeading:m()(o,"subHeading",""),legalese:m()(o,"legalese",""),preferenceText:m()(o,"preferenceText",""),buttonText:m()(o,"buttonText",""),successCopy:m()(o,"successCopy",""),inputPlaceholder:m()(o,"inputPlaceholder",""),onClick:t,error:r},i))};function Y(){return(Y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(t.push(o.value),!n||t.length!==n);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var ne={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"NewsletterWithMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasConsent"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"brand"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"market"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subscribeUserToNewsletter"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"hasConsent"},value:{kind:"Variable",name:{kind:"Name",value:"hasConsent"}}},{kind:"Argument",name:{kind:"Name",value:"brand"},value:{kind:"Variable",name:{kind:"Name",value:"brand"}}},{kind:"Argument",name:{kind:"Name",value:"market"},value:{kind:"Variable",name:{kind:"Name",value:"market"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:297,source:{body:"\n  mutation NewsletterWithMutation(\n    $email: String!\n    $hasConsent: Boolean!\n    $brand: String!\n    $market: String!\n  ) {\n    subscribeUserToNewsletter(\n      email: $email\n      hasConsent: $hasConsent\n      brand: $brand\n      market: $market\n    ) {\n      status\n      message\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};n.default=function(e){var n=e.position,t=e.onSubscribe,i=e.onDismiss,o=e.tenantConfig,l=ee(e,["position","onSubscribe","onDismiss","tenantConfig"]),c=Z(Object(r.useState)(null),2),s=c[0],d=c[1];return Object(r.useEffect)((function(){window.dataLayer&&window.dataLayer.push({event:"nlCompLoaded",nlposition:n})}),[n]),a.a.createElement(u,{mutation:ne},(function(e,r){var c,u=r.data;return a.a.createElement(X,Y({error:s,onDismiss:function(){window.dataLayer&&window.dataLayer.push({event:"nlCompClosed",nlposition:n}),i&&i()},onSubmit:(c=function(r){var a=!1;r.preventDefault(),d(null);var i=r.target,l=i.email,c=i.preferenceCheck;return function(e,n){return e&&e.then?e.then(n):n(e)}(function(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}((function(){return r=e({variables:{email:l.value,hasConsent:c.checked,brand:o.brand.code,market:o.market.code}}),i=function(e){return window.dataLayer.push({event:"nlCompSuccessfulsignup",nlposition:n}),t&&t(),a=!0,e},u?i?i(r):r:(r&&r.then||(r=Promise.resolve(r)),i?r.then(i):r);var r,i,u}),(function(e){d(e.message),window.dataLayer&&window.dataLayer.push({event:"nlCompError",nlposition:n})})),(function(e){return a?e:null}))},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(c.apply(this,e))}catch(e){return Promise.reject(e)}}),displaySuccess:u&&"success"===u.subscribeUserToNewsletter.status},l))}))}}}]);
//# sourceMappingURL=NewsletterWithMutation.chunk.0e2bf16902af83b67441.js.map