!function(e){e.barlesque=function(n,o){var t=this;t.$el=e(n),t.el=n,t.$el.data("barlesque",t),t.init=function(){t.options=e.extend({},e.barlesque.defaultOptions,o),$nav=t.$el.find("nav"),$logo=t.$el.find(".barlesque-logo"),$moreUL=e('<ul class="more hidden"/>'),$moreLink=e('<a href="javascript:void(0)"/>').text(t.options.dropDownText),$moreLI=e("<li/>"),$moreDropdown=e("<ul/>"),$nav.hide(),$moreUL.append($moreLI),$moreLI.append($moreLink),$moreLI.append($moreDropdown),$nav.append($moreUL),t.$logo=$logo,t.$nav=$nav,t.$navCont=t.$nav.find(">ul:not('.more')"),t.$more=t.$nav.find(">ul.more"),t.$moreCont=t.$more.find(">li>ul"),t.$moreBtn=t.$more.find(">li>a"),t.initWatchers(),$nav.css("display","table-cell"),t.respond()},t.initWatchers=function(){e(window).resize(function(){t.respond()})},t.respond=function(){var n=t.$nav.width(),o=n-t.options.padding,i=(t.navItemsWidth(),t.$navCont.children()),r=t.$moreCont.children();e(window).width()<=t.options.mobileBreak?e(i.get().reverse()).each(function(){e(this).prependTo(t.$moreCont)}):(e(i.get().reverse()).each(function(){t.navItemsWidth()>o&&e(this).prependTo(t.$moreCont)}),r.each(function(){t.navItemsWidth()<o-e(this).width()&&e(this).appendTo(t.$navCont)})),t.$moreCont.children().length<=0?t.$more.addClass("hidden"):t.$more.removeClass("hidden"),t.$moreBtn.text(t.$navCont.children().length<=0?t.options.dropDownTextFull:t.options.dropDownText)},t.navItemsWidth=function(){var n=0;return t.$nav.find(">ul:not('.hidden')>li").filter(function(){n+=e(this).width()}),n},t.init()},e.barlesque.defaultOptions={padding:200,dropDownText:"More...",dropDownTextFull:"TV",mobileBreak:500},e.fn.barlesque=function(n){return this.each(function(){new e.barlesque(this,n);e(this).data("barlesque")})}}(jQuery);